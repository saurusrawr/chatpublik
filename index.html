<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Saurus Store</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#6d28d9',
            secondary: '#a78bfa',
            neon: '#c084fc',
            dark: '#0f0e17',
            light: '#f3e8ff'
          }
        }
      }
    }
  </script>

  <style>
    body {
      background: linear-gradient(135deg, #0f0e17, #1a0033, #2e0066);
      color: #f3e8ff;
      background-attachment: fixed;
    }
    .glow { text-shadow: 0 0 10px #a78bfa, 0 0 20px #7c3aed; }
    .card {
      background: rgba(109,40,217,0.15);
      backdrop-filter: blur(12px);
      border: 1px solid #a78bfa;
      box-shadow: 0 0 20px rgba(109,40,217,0.3);
    }
    .btn {
      background: linear-gradient(135deg, #6d28d9, #a78bfa);
      color: white;
      transition: all 0.4s;
    }
    .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(109,40,217,0.6);
    }
    .page { display: none; }
    .page.active { display: block; }
    input, select {
      background: rgba(255,255,255,0.08);
      border: 1px solid #a78bfa;
      color: white;
    }
  </style>
</head>

<body class="max-w-md mx-auto min-h-screen pb-28 p-4">

<!-- HEADER -->
<div class="flex justify-between items-center mb-6">
  <div class="flex items-center gap-3">
    <div class="w-14 h-14 bg-gradient-to-br from-primary to-secondary text-white rounded-2xl flex items-center justify-center glow">
      <i class="fas fa-store text-2xl"></i>
    </div>
    <div>
      <p id="storeName" class="font-bold text-2xl glow">Saurus Store</p>
      <p id="botText" class="text-sm text-neon">Luna AI MD v7</p>
    </div>
  </div>

  <div class="flex gap-5">
    <button onclick="showPage('cart')" class="relative text-neon">
      <i class="fas fa-shopping-cart text-3xl"></i>
      <span id="cartCount" class="absolute -top-3 -right-3 bg-secondary text-white text-xs w-7 h-7 rounded-full flex items-center justify-center shadow-lg glow">0</span>
    </button>
    <button onclick="openAdmin()" class="text-neon">
      <i class="fas fa-user-shield text-3xl"></i>
    </button>
  </div>
</div>

<!-- KATEGORI -->
<div class="grid grid-cols-2 gap-4 mb-8">
  <button onclick="showPage('bot')" class="card p-6 rounded-2xl text-center">
    <p class="font-bold text-2xl text-primary glow">ü§ñ BOT</p>
  </button>
  <button onclick="showPage('panel')" class="card p-6 rounded-2xl text-center">
    <p class="font-bold text-2xl text-primary glow">‚öôÔ∏è PANEL</p>
  </button>
</div>

<!-- BOT -->
<div id="bot" class="page active space-y-6">
  <h2 class="font-bold text-2xl text-primary text-center glow">ü§ñ Produk Bot</h2>
  <div id="botList" class="space-y-6"></div>
</div>

<!-- PANEL -->
<div id="panel" class="page space-y-6">
  <h2 class="font-bold text-2xl text-primary text-center glow">‚öôÔ∏è Produk Panel</h2>
  <div id="panelList" class="space-y-6"></div>
</div>

<!-- CART -->
<div id="cart" class="page space-y-6">
  <h2 class="font-bold text-2xl text-primary text-center glow">üõí Keranjang</h2>
  <div id="cartList" class="space-y-4"></div>

  <div class="card p-6 font-bold text-center text-xl glow">
    Total: Rp <span id="totalPrice">0</span>
  </div>

  <button onclick="checkoutWA()" class="btn w-full py-5 rounded-2xl font-bold text-lg">
    Order via WhatsApp
  </button>

  <button onclick="checkoutTG()" class="card w-full py-5 rounded-2xl font-bold text-primary border border-neon text-lg">
    Order via Telegram
  </button>
</div>

<!-- ADMIN -->
<div id="admin" class="page space-y-6">
  <h2 class="font-bold text-3xl text-primary text-center glow">üö® OWNER PANEL</h2>

  <div class="card p-6">
    <input id="storeInput" placeholder="Nama Toko" class="w-full p-4 mb-4 bg-dark border border-neon rounded-xl text-white text-lg">
    <input id="waInput" placeholder="Nomor WA" class="w-full p-4 mb-4 bg-dark border border-neon rounded-xl text-white text-lg">
    <input id="tgInput" placeholder="Username Telegram" class="w-full p-4 mb-4 bg-dark border border-neon rounded-xl text-white text-lg">
    <input id="botTextInput" placeholder="Teks Bot" class="w-full p-4 mb-4 bg-dark border border-neon rounded-xl text-white text-lg">

    <button onclick="saveConfig()" class="btn w-full py-4 rounded-2xl text-lg">üíæ Simpan Config</button>
  </div>

  <hr class="border-secondary my-8">

  <h3 class="font-bold text-2xl text-primary text-center glow">‚ûï Tambah Produk</h3>
  <input id="pName" placeholder="Nama Produk" class="w-full p-4 mb-4 bg-dark border border-neon rounded-xl text-white">
  <input id="pDesc" placeholder="Deskripsi" class="w-full p-4 mb-4 bg-dark border border-neon rounded-xl text-white">
  <input id="pPrice" placeholder="Harga" type="number" class="w-full p-4 mb-4 bg-dark border border-neon rounded-xl text-white">
  <select id="pCat" class="w-full p-4 mb-4 bg-dark border border-neon rounded-xl text-white">
    <option value="bot">BOT</option>
    <option value="panel">PANEL</option>
  </select>
  <button onclick="addProduct()" class="btn w-full py-4 rounded-2xl">Tambah</button>

  <div id="adminList" class="space-y-4 mt-8"></div>
</div>

<script>
/* üî• FIREBASE */
firebase.initializeApp({
  apiKey: "AIzaSyBer_DF3-zAyH2rmnMpzilUiE5BYTb4In0",
  databaseURL: "https://saurusproject-6974b-default-rtdb.asia-southeast1.firebasedatabase.app"
})
const db = firebase.database()

/* CONFIG */
const DEV_PASSWORD = "rusdev"
const waNumber = "62895393336779"
const tgLink = "https://t.me/lordsaurus"

/* PAGE */
function showPage(id){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'))
  document.getElementById(id).classList.add('active')
}

/* ADMIN */
function openAdmin(){
  const pw = prompt("Masukkan password owner (rusdev):")
  if(pw !== DEV_PASSWORD) return alert("Password salah bro! Coba lagi.")
  showPage('admin')
}

/* CONFIG LOAD */
db.ref('config').on('value', s=>{
  if(!s.exists()) return
  const d = s.val()
  document.getElementById('storeName').innerText = d.storeName || "Saurus Store"
  document.getElementById('botText').innerText = d.botText || "Luna AI MD v7"
  document.getElementById('storeInput').value = d.storeName
  document.getElementById('waInput').value = d.wa
  document.getElementById('tgInput').value = d.telegram
  document.getElementById('botTextInput').value = d.botText
})

function saveConfig(){
  db.ref('config').set({
    storeName: document.getElementById('storeInput').value,
    wa: document.getElementById('waInput').value,
    telegram: document.getElementById('tgInput').value,
    botText: document.getElementById('botTextInput').value
  })
  alert("Config tersimpan!")
}

/* PRODUK */
function renderProducts(data){
  document.getElementById('botList').innerHTML = ''
  document.getElementById('panelList').innerHTML = ''
  document.getElementById('adminList').innerHTML = ''
  for(let id in data){
    let p = data[id]
    let card = `
      <div class="card p-5 rounded-2xl">
        <p class="font-bold text-xl text-primary">${p.name}</p>
        <p class="text-sm text-light">${p.desc}</p>
        <p class="text-green-400 font-bold mt-2">Rp${p.price.toLocaleString('id-ID')}</p>
      </div>`
    if(p.category==="bot") document.getElementById('botList').innerHTML+=card
    else document.getElementById('panelList').innerHTML+=card

    document.getElementById('adminList').innerHTML+=`
      <div class="card p-5 rounded-2xl">
        <input value="${p.name}" onchange="edit('${id}','name',this.value)" class="w-full mb-3 p-3 bg-dark border border-secondary rounded text-white">
        <input value="${p.desc}" onchange="edit('${id}','desc',this.value)" class="w-full mb-3 p-3 bg-dark border border-secondary rounded text-white">
        <input value="${p.price}" onchange="edit('${id}','price',this.value)" class="w-full mb-3 p-3 bg-dark border border-secondary rounded text-white">
        <button onclick="del('${id}')" class="bg-red-600 w-full mt-2 py-3 rounded">Hapus</button>
      </div>`
  }
}

db.ref('products').on('value',s=>{
  if(s.exists())renderProducts(s.val())
})

function addProduct(){
  db.ref('products').push({
    name:document.getElementById('pName').value,
    desc:document.getElementById('pDesc').value,
    price:Number(document.getElementById('pPrice').value),
    category:document.getElementById('pCat').value
  })
  document.getElementById('pName').value = ''
  document.getElementById('pDesc').value = ''
  document.getElementById('pPrice').value = ''
}

function edit(id,k,v){
  db.ref('products/'+id+'/'+k).set(v)
}

function del(id){
  if(confirm("Hapus?"))db.ref('products/'+id).remove()
}
</script>

</body>
</html>
