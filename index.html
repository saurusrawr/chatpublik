<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Saurus Store</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>

<script>
tailwind.config={theme:{extend:{colors:{
primary:'#7c3aed',
secondary:'#a78bfa'
}}}}
</script>

<style>
.page{display:none}
.page.active{display:block}
</style>
</head>

<body class="max-w-md mx-auto min-h-screen bg-gradient-to-b from-violet-900 to-black text-white p-4">

<!-- HEADER -->
<div class="flex justify-between items-center mb-4">
  <div>
    <h1 id="storeName" class="font-bold text-xl">Saurus Store</h1>
    <p id="botText" class="text-sm text-violet-300">Luna AI MD v7</p>
  </div>
  <button onclick="openAdmin()" class="text-sm bg-violet-600 px-3 py-1 rounded">OWNER</button>
</div>

<!-- CATEGORY -->
<div class="grid grid-cols-2 gap-3 mb-4">
  <button onclick="showPage('bot')" class="bg-violet-800 p-3 rounded">ü§ñ BOT</button>
  <button onclick="showPage('panel')" class="bg-violet-800 p-3 rounded">‚öôÔ∏è PANEL</button>
</div>

<!-- BOT -->
<div id="bot" class="page active space-y-2">
  <h2 class="font-bold text-lg">ü§ñ Produk Bot</h2>
  <div id="botList"></div>
</div>

<!-- PANEL -->
<div id="panel" class="page space-y-2">
  <h2 class="font-bold text-lg">‚öôÔ∏è Produk Panel</h2>
  <div id="panelList"></div>
</div>

<!-- ADMIN -->
<div id="admin" class="page space-y-3">
  <h2 class="font-bold text-lg">üö® OWNER PANEL</h2>

  <input id="storeInput" placeholder="Nama Toko" class="w-full p-2 rounded text-black">
  <input id="waInput" placeholder="Nomor WA" class="w-full p-2 rounded text-black">
  <input id="tgInput" placeholder="Username Telegram" class="w-full p-2 rounded text-black">
  <input id="botTextInput" placeholder="Teks Bot" class="w-full p-2 rounded text-black">

  <button onclick="saveConfig()" class="bg-green-600 w-full py-2 rounded">üíæ Simpan Config</button>

  <hr class="border-violet-700">

  <h3 class="font-bold">‚ûï Tambah Produk</h3>
  <input id="pName" placeholder="Nama Produk" class="w-full p-2 rounded text-black">
  <input id="pDesc" placeholder="Deskripsi" class="w-full p-2 rounded text-black">
  <input id="pPrice" placeholder="Harga" type="number" class="w-full p-2 rounded text-black">
  <select id="pCat" class="w-full p-2 rounded text-black">
    <option value="bot">BOT</option>
    <option value="panel">PANEL</option>
  </select>
  <button onclick="addProduct()" class="bg-violet-600 w-full py-2 rounded">Tambah</button>

  <div id="adminList" class="space-y-2"></div>
</div>

<script>
/* üî• FIREBASE */
firebase.initializeApp({
  apiKey:"AIzaSyBer_DF3-zAyH2rmnMpzilUiE5BYTb4In0",
  databaseURL:"https://saurusproject-6974b-default-rtdb.asia-southeast1.firebasedatabase.app"
})
const db=firebase.database()

/* CONFIG */
const DEV_PASSWORD="rusdev"

/* PAGE */
function showPage(id){
document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'))
document.getElementById(id).classList.add('active')
}

/* ADMIN */
function openAdmin(){
const pw=prompt("Password Owner:")
if(pw!==DEV_PASSWORD)return alert("Salah")
showPage('admin')
}

/* CONFIG LOAD */
db.ref('config').on('value',s=>{
if(!s.exists())return
const d=s.val()
storeName.innerText=d.storeName
botText.innerText=d.botText
storeInput.value=d.storeName
waInput.value=d.wa
tgInput.value=d.telegram
botTextInput.value=d.botText
})

function saveConfig(){
db.ref('config').set({
storeName:storeInput.value,
wa:waInput.value,
telegram:tgInput.value,
botText:botTextInput.value
})
alert("Tersimpan")
}

/* PRODUK */
function renderProducts(data){
botList.innerHTML=''
panelList.innerHTML=''
adminList.innerHTML=''
for(let id in data){
let p=data[id]
let card=`<div class="bg-violet-800 p-3 rounded">
<b>${p.name}</b>
<p class="text-sm">${p.desc}</p>
<p class="text-green-400">Rp${p.price}</p>
</div>`
if(p.category==="bot")botList.innerHTML+=card
else panelList.innerHTML+=card

adminList.innerHTML+=`
<div class="bg-black p-2 rounded border border-violet-700">
<input value="${p.name}" onchange="edit('${id}','name',this.value)" class="w-full text-black p-1">
<input value="${p.desc}" onchange="edit('${id}','desc',this.value)" class="w-full text-black p-1">
<input value="${p.price}" onchange="edit('${id}','price',this.value)" class="w-full text-black p-1">
<button onclick="del('${id}')" class="bg-red-600 w-full mt-1">Hapus</button>
</div>`
}
}

db.ref('products').on('value',s=>{
if(s.exists())renderProducts(s.val())
})

function addProduct(){
db.ref('products').push({
name:pName.value,
desc:pDesc.value,
price:Number(pPrice.value),
category:pCat.value
})
}

function edit(id,k,v){
db.ref('products/'+id+'/'+k).set(v)
}

function del(id){
if(confirm("Hapus?"))db.ref('products/'+id).remove()
}
</script>

</body>
</html>
